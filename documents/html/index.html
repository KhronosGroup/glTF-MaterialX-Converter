<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaterialX / glTF Texture Procedurals: MaterialX / glTF Procedurals Interop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MaterialX / glTF Texture Procedurals
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Utilities for interoperability between MaterialX and glTF Texture Procedurals</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MaterialX / glTF Procedurals Interop </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e__api"></a></p>
<p><a href="https://github.com/KhronosGroup/glTF-MaterialX-Converter/actions?query=branch%3Amain"><img src="https://github.com/KhronosGroup/glTF-MaterialX-Converter/workflows/main/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Introduction</h2>
<p>This package supports the bi-directional translation between MaterialX material graphs and the glTF Procedural Textures extension.</p>
<ul>
<li>The Khronos extensions can be found here:<ul>
<li><a href="https://github.com/KhronosGroup/glTF/tree/KHR_texture_procedurals/extensions/2.0/Khronos/KHR_texture_procedurals">KHR_texture_procedurals</a></li>
<li><a href="https://github.com/KhronosGroup/glTF/tree/KHR_texture_procedurals/extensions/2.0/Vendor/EXT_texture_procedurals_mx_1_39">EXT_texture_procedurals_mx_1_39</a></li>
</ul>
</li>
<li>The MaterialX specification documents can be found <a href="https://github.com/AcademySoftwareFoundation/MaterialX/tree/main/documents/Specification">here</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Dependencies</h2>
<ul>
<li>The 1.39 release (or patch releases) of MaterialX available on <a href="https://pypi.org/project/MaterialX/">PyPi</a> is required.</li>
<li>The <code>jsonschema</code> package if Schema validation is desired</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Setup</h2>
<p>The Github repository can be forked / cloned locally and the package built using <code>pip</code> as follows from the root folder:</p>
<p><code>pip install .</code></p>
<p>All dependencies listed will be installed if required.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Command Line Interfaces</h3>
<p>To convert from a MaterialX document to produce a glTF JSON document the <code><a class="el" href="materialx__to__gltf_8py.html">materialx_to_gltf.py</a></code> utility script may be used.</p>
<p>The following is an example converting a sample file found in the test folder. The results are saved to a file called <code>checkerboard_graph.gltf</code>.</p>
<p><code> python <a class="el" href="materialx__to__gltf_8py.html">source/gltf_materialx_converter/materialx_to_gltf.py</a> "tests/data/checkerboard_graph.mtlx" </code></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Documentation</h2>
<h3><a class="anchor" id="autotoc_md6"></a>
API</h3>
<p>API documentation can be found <a href="../../documents/html/index.html">here</a></p>
<p>Documentation can be generated by running <code>doxygen</code> from the "documents" folder.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Tests</h2>
<p>The following command can be used to run tests from the root folder:</p>
<p><code> python -m unittest discover -s tests -p "test_*.py" </code></p>
<h2><a class="anchor" id="autotoc_md8"></a>
Supported MaterialX Configurations</h2>
<p>Only specific configurations of MaterialX can be mapped to glTF Texture Procedurals.</p><ol type="1">
<li>There must be a <code>surfacematerial</code> material node</li>
<li>There must be a <code>glTF PBR</code> node connected to the surface shader input of the material.</li>
<li>A single <code>nodegraph</code> with a <code>color3</code> output node which is connected to the base color on the surface shader. The constant node can be replaced with the desired set of nodes, and one or more inputs may be specified to route data into the <code>nodegraph</code>.</li>
</ol>
<p>Below is a diagram the minimal graph and it's corresponding MaterialX XML document from the test data area. There are no inputs specified on the <code>nodegraph</code>.</p>
<pre><code class="language-mermaid"><div class="mermaid">

graph LR
    gltf_Material([surfacematerial:material])
    style gltf_Material   fill:#090, color:#FFF
    gltf_Shader[gltf_pbr:surfaceshader]
    subgraph gltf_procedural
    gltf_procedural_output_color4([output:color3])
    style gltf_procedural_output_color4  fill:#09D, color:#FFF
    gltf_procedural_constant_color4([constant:color3:1,1,1])
    style gltf_procedural_constant_color4  fill:#888, color:#000
    end
    gltf_Shader --"surfaceshader"--&gt; gltf_Material
    gltf_procedural_constant_color4 --&gt; gltf_procedural_output_color4
    gltf_procedural_output_color4 --"base_color"--&gt; gltf_Shader
</div></code></pre><p><a href="../..//tests/data/minimal_graph.mtlx">Minimal MTLX Configuration File</a></p>
<h3><a class="anchor" id="autotoc_md9"></a>
Sample Data</h3>
<p>The following is a set of example files used for unit testing. The term "Compound nodes" refers to nodes which are implemented as node graphs themselves ("functional graphs" in MaterialX terminology)</p>
<p>For each MaterialX file the resulting glTF file is given, along with a diagram of how the graph looks and reference image rendered using the <code>MaterialXView</code> sample application which is available as part of the core MaterialX distribution.</p>
<details  open="true">
<summary >
Examples</summary>
<p></p>
<table class="doxtable">
<tr>
<th>Description </th><th>Documents </th><th><p class="starttd">Reference Image</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><p class="starttd">The following is a simple graph which adds two colors together.</p>
<ul>
<li>Graph count: single</li>
<li>Graph inputs: multiple</li>
<li>Graph outputs: single</li>
<li>Stream inputs: no</li>
<li>Compound nodes: none</li>
<li>Downstream shader: glTF PBR</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">

graph TB
    subgraph graph1
    graph1_myin1([input:1,0,0])
    style graph1_myin1  fill:#09D, color:#FFF
    graph1_myin2([input:0.94902, 0.768627, 0.109804])
    style graph1_myin2  fill:#09D, color:#FFF
    graph1_output_color4([output])
    style graph1_output_color4  fill:#09D, color:#FFF
    graph1_add_color4[add]
    end
    Default([surfacematerial])
    style Default   fill:#090, color:#FFF
    gltf_mat[gltf_pbr]
    graph1_myin2 --"in1"--&gt; graph1_add_color4
    graph1_myin1 --"in2"--&gt; graph1_add_color4
    graph1_add_color4 --&gt; graph1_output_color4
    gltf_mat --"surfaceshader"--&gt; Default
    graph1_output_color4 --"base_color"--&gt; gltf_mat
</div></code></pre><p class="endtd"></p>
</td><td><a href="../..//tests/data/add_graph.mtlx">MTLX</a> <a href="../..//tests/data/add_graph.gltf">GLTF</a>  </td><td><p class="starttd"><img src="../..//tests/data/add_graph.png" alt="" class="inline"/>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"></p>
<p class="intertd">The following is a pattern graph that produces a checkerboard pattern. The two input colors, and a texture coordinate tiling option are exposed on the node graph. The output is a color which is routed to a downstream glTF PBR shading node (glTF material).</p>
<ul>
<li>Graph count: single</li>
<li>Graph inputs: multiple</li>
<li>Graph outputs: single</li>
<li>Stream inputs: yes</li>
<li>Compound nodes: none</li>
<li>Downstream shader: glTF PBR</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">

graph TB
    subgraph NG_main
    NG_main_uvtiling([input:vector2:8,8])
    style NG_main_uvtiling  fill:#09D, color:#FFF
    NG_main_color1([input:color3:1,0.094118,0.031373])
    style NG_main_color1  fill:#09D, color:#FFF
    NG_main_color2([input:color3:0.035294,0.090196,0.878431])
    style NG_main_color2  fill:#09D, color:#FFF
    NG_main_output_N_mtlxmix_out([output:color3])
    style NG_main_output_N_mtlxmix_out  fill:#09D, color:#FFF
    NG_main_N_mtlxmix[mix:color3]
    NG_main_N_mtlxdotproduct[dotproduct:float]
    NG_main_N_mtlxmult[multiply:vector2]
    NG_main_N_mtlxsubtract[subtract:vector2]
    NG_main_N_mtlxfloor[floor:vector2]
    NG_main_N_modulo[modulo:float]
    NG_main_Texcoord[texcoord:vector2:0]
    end
    Gltf_pbr[gltf_pbr:surfaceshader]
    MAT_Gltf_pbr([surfacematerial:material])
    style MAT_Gltf_pbr   fill:#090, color:#FFF
    NG_main_N_mtlxmix --&gt; NG_main_output_N_mtlxmix_out
    NG_main_color1 --"fg"--&gt; NG_main_N_mtlxmix
    NG_main_color2 --"bg"--&gt; NG_main_N_mtlxmix
    NG_main_N_modulo --"mix"--&gt; NG_main_N_mtlxmix
    NG_main_N_mtlxfloor --"in1"--&gt; NG_main_N_mtlxdotproduct
    NG_main_Texcoord --"in1"--&gt; NG_main_N_mtlxmult
    NG_main_uvtiling --"in2"--&gt; NG_main_N_mtlxmult
    NG_main_N_mtlxmult --"in1"--&gt; NG_main_N_mtlxsubtract
    NG_main_N_mtlxsubtract --"in"--&gt; NG_main_N_mtlxfloor
    NG_main_N_mtlxdotproduct --"in1"--&gt; NG_main_N_modulo
    NG_main_output_N_mtlxmix_out --"base_color"--&gt; Gltf_pbr
    Gltf_pbr --"surfaceshader"--&gt; MAT_Gltf_pbr
</div></code></pre><p class="endtd"></p>
</td><td><a href="../../tests/data/checkerboard_graph.mtlx">MTLX</a> <a href="../../tests/data/checkerboard_graph.gltf">GLTF</a>  </td><td><p class="starttd"><img src="../../tests/data/checkerboard_graph.png" alt="" class="inline"/>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd">Pattern graph using a file texture</p>
<ul>
<li>Graph count: single</li>
<li>Graph inputs: none</li>
<li>Graph outputs: single</li>
<li>Stream inputs: yes</li>
<li>File inputs: single. Non-default filtering.</li>
<li>Compound nodes: yes. UV placement.</li>
<li>Downstream shader: gltf PBR</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">

graph TB
    subgraph nodegraph1
    nodegraph1_output_color3([output_color3:color3])
    style nodegraph1_output_color3  fill:#09D, color:#FFF
    nodegraph1_image_color3[image_color3:color3]
    nodegraph1_place2d_vector2[place2d_vector2:vector2]
    nodegraph1_texcoord_vector2[texcoord_vector2:vector2:1]
    end
    gltf_pbr_surfaceshader[gltf_pbr_surfaceshader:surfaceshader]
    surfacematerial([surfacematerial:material])
    style surfacematerial   fill:#090, color:#FFF
    nodegraph1_image_color3 --&gt; nodegraph1_output_color3
    nodegraph1_place2d_vector2 --"texcoord"--&gt; nodegraph1_image_color3
    nodegraph1_texcoord_vector2 --"texcoord"--&gt; nodegraph1_place2d_vector2
    nodegraph1_output_color3 --"base_color"--&gt; gltf_pbr_surfaceshader
    gltf_pbr_surfaceshader --"surfaceshader"--&gt; surfacematerial
</div></code></pre><p class="endtd"></p>
</td><td><a href="../../tests/data/bindings/gltf_simple_filetexture.mtlx">MTLX</a> <a href="../../tests/data/bindings/gltf_simple_filetexture.gltf">GLTF</a> </td><td><p class="starttd"><img src="../../tests/data/bindings/gltf_simple_filetexture.png" alt="" class="inline"/> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd">Pattern graph using using multiple file textures with different texture placements and a shared input stream.</p>
<ul>
<li>Graph count: single</li>
<li>Graph inputs: none</li>
<li>Graph outputs: single</li>
<li>Stream inputs: yes</li>
<li>File inputs: multiple</li>
<li>Compound nodes: yes.</li>
<li>Downstream shader: gltf PBR</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">

graph TB
    gltf_pbr_surfaceshader[gltf_pbr:surfaceshader]
    surfacematerial([surfacematerial:material])
    style surfacematerial   fill:#090, color:#FFF
    subgraph nodegraph1
    nodegraph1_output_color3([output:color3])
    style nodegraph1_output_color3  fill:#09D, color:#FFF
    nodegraph1_texcoord_vector2[texcoord:vector2:0]
    nodegraph1_place2d_vector3[place2d:vector2]
    nodegraph1_multiply_color4[multiply:color3]
    nodegraph1_image_color4[image:color3]
    nodegraph1_image_color3[image:color3]
    nodegraph1_place2d_vector2[place2d:vector2]
    end
    nodegraph1_output_color3 --"base_color"--&gt; gltf_pbr_surfaceshader
    gltf_pbr_surfaceshader --"surfaceshader"--&gt; surfacematerial
    nodegraph1_multiply_color4 --&gt; nodegraph1_output_color3
    nodegraph1_texcoord_vector2 --"texcoord"--&gt; nodegraph1_place2d_vector3
    nodegraph1_image_color3 --"in1"--&gt; nodegraph1_multiply_color4
    nodegraph1_image_color4 --"in2"--&gt; nodegraph1_multiply_color4
    nodegraph1_place2d_vector3 --"texcoord"--&gt; nodegraph1_image_color4
    nodegraph1_place2d_vector2 --"texcoord"--&gt; nodegraph1_image_color3
    nodegraph1_texcoord_vector2 --"texcoord"--&gt; nodegraph1_place2d_vector2
</div></code></pre><p class="endtd"></p>
</td><td><a href="../../tests/data/bindings/gltf_shared_filetexture.mtlx">MTLX</a> <a href="../../tests/data/bindings/gltf_shared_filetexture.gltf">GLTF</a> </td><td><p class="starttd"><img src="../../tests/data/bindings/gltf_shared_filetexture.png" alt="" class="inline"/> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd">Pattern graph using using multiple file textures routed to different outputs. Each output is connected to a different downstream shader.</p>
<ul>
<li>Graph count: single</li>
<li>Graph inputs: none</li>
<li>Graph outputs: single</li>
<li>Stream inputs: yes</li>
<li>File inputs: yes.</li>
<li>Compound nodes: yes.</li>
<li>Downstream shader: gltf PBR</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">

graph TB
    gltf_pbr_surfaceshader[gltf_pbr:surfaceshader]
    surfacematerial([surfacematerial:material])
    style surfacematerial   fill:#090, color:#FFF
    surfacematerial1([surfacematerial:material])
    style surfacematerial1   fill:#090, color:#FFF
    gltf_pbr_surfaceshader1[gltf_pbr:surfaceshader]
    subgraph nodegraph1
    nodegraph1_output_color4([output:color3])
    style nodegraph1_output_color4  fill:#09D, color:#FFF
    nodegraph1_output_color3([output:color3])
    style nodegraph1_output_color3  fill:#09D, color:#FFF
    nodegraph1_texcoord_vector2[texcoord:vector2:0]
    nodegraph1_place2d_vector3[place2d:vector2]
    nodegraph1_place2d_vector2[place2d:vector2]
    nodegraph1_image_color4[image:color3]
    nodegraph1_image_color3[image:color3]
    end
    nodegraph1_output_color3 --"base_color"--&gt; gltf_pbr_surfaceshader
    gltf_pbr_surfaceshader --"surfaceshader"--&gt; surfacematerial
    gltf_pbr_surfaceshader1 --"surfaceshader"--&gt; surfacematerial1
    nodegraph1_output_color4 --"base_color"--&gt; gltf_pbr_surfaceshader1
    nodegraph1_texcoord_vector2 --"texcoord"--&gt; nodegraph1_place2d_vector3
    nodegraph1_texcoord_vector2 --"texcoord"--&gt; nodegraph1_place2d_vector2
    nodegraph1_place2d_vector3 --"texcoord"--&gt; nodegraph1_image_color4
    nodegraph1_image_color4 --&gt; nodegraph1_output_color4
    nodegraph1_image_color3 --&gt; nodegraph1_output_color3
    nodegraph1_place2d_vector2 --"texcoord"--&gt; nodegraph1_image_color3
</div></code></pre><p class="endtd"></p>
</td><td><a href="../../tests/data/bindings/gltf_shared_filetexture_2.mtlx">MTLX</a> <a href="../../tests/data/bindings/gltf_shared_filetexture_2.gltf">GLTF</a> </td><td><p class="starttd"><img src="../../tests/data/bindings/gltf_shared_filetexture_2.png" alt="" class="inline"/> </p>
<p class="endtd"></p>
</td></tr>
</table>
<p></p>
</details>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
